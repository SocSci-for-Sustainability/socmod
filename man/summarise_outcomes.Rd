% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/analysis.R
\name{summarise_outcomes}
\alias{summarise_outcomes}
\title{Summarize outcomes across trials by input parameters}
\usage{
summarise_outcomes(trials, input_parameters, outcome_measures = NULL)
}
\arguments{
\item{trials}{A list of \code{Trial} objects}

\item{input_parameters}{Character vector of parameter names to group by}

\item{outcome_measures}{Character vector of outcome variable names to summarize}
}
\value{
A tibble with one row per unique combination of input parameters,
containing the mean of each specified outcome measure.
}
\description{
This function summarizes trial-level outcomes by grouping across input parameters.
It computes the mean of specified outcome measures across all trials sharing the same input parameter values.
}
\examples{
abm_gen <- function(params) {
  params$graph <- make_small_world(params$n_agents, 6, 0.5)
  return (do.call(make_abm, params) \%>\%
            initialize_agents(
              initial_prevalence = params$initial_prevalence,
              adaptive_fitness = params$adaptive_fitness
            )
  )
}
adaptive_fitness_vals <- c(0.9, 1.1)
trials <-
  run_trials(
    abm_gen,
    n_trials_per_param = 2,
    stop = socmod::fixated,
    n_agents = 20,
    initial_prevalence = 0.1,
    adaptive_fitness = adaptive_fitness_vals
)
outcomes <- summarise_outcomes(
  trials, 
  input_parameters = "adaptive_fitness", 
  outcome_measures = c("success_rate", "mean_fixation_steps")
) 

max_fix_time <- max(outcomes$Value[outcomes$Measure == "mean_fixation_steps"])
# Normalize to calculate mean fixation time as a fraction of maximum
outcomes_norm <- outcomes \%>\%
  dplyr::mutate(Value = dplyr::case_when(
    Measure == "mean_fixation_steps" ~ Value / max_fix_time,
    TRUE ~ Value
  ))
# Rename and set order of Measure factors to avoid messing with the legend in plotting
outcomes_norm$Measure[outcomes_norm$Measure == "success_rate"] <- "Success rate"
outcomes_norm$Measure[outcomes_norm$Measure == "mean_fixation_steps"] <- "Normalized fixation time"
outcomes_norm$Measure <- factor(outcomes_norm$Measure, levels = c(
  "Success rate", "Normalized fixation time"
))
}
